# AWS 기반 애플리케이션 인프라 아키텍처 설명

안녕하세요. 제가 설계하고 구축한 AWS 인프라 아키텍처에 대해 설명해 드리겠습니다.

본 아키텍처는 **안정적인 서비스 운영**, **개발 생산성 향상**, 그리고 **보안 강화**라는 세 가지 핵심 목표를 가지고 설계되었습니다. 요구사항이었던 AWS 배포 환경 구축, 서버 계층 분리, 개발/운영 환경 분리, CI/CD 파이프라인 구축, HTTPS 적용을 충족하며, 각 구성 요소가 어떻게 유기적으로 동작하는지 설명하겠습니다.

## 1. 전체 아키텍처 개요

개발(Dev) 환경과 운영(Prod) 환경을 완벽하게 분리하여 안정성을 확보한 구조입니다. 각 환경은 독립된 EC2 애플리케이션 서버와 RDS 데이터베이스 서버로 구성되어 있으며, Git 브랜치 전략과 연계된 자동 배포 파이프라인을 통해 코드 변경 사항이 신속하고 안전하게 반영됩니다.

---

## 2. 핵심 구성 요소 및 설계 의도

### 가. 안정성을 위한 인프라 환경 분리 (EC2 & RDS)

**요구사항: 애플리케이션 서버와 데이터베이스 서버 분리, 개발(dev)과 운영(prod) 설정의 독립적 관리**

애플리케이션의 안정적인 운영을 위해 가장 먼저 고려한 것은 **환경 격리(Isolation)**입니다.

-   **개발(Dev) 환경**: `EC2(Ubuntu)` 1대, `RDS(MySQL 8.0)` 1대
-   **운영(Prod) 환경**: `EC2(Ubuntu)` 1대, `RDS(MySQL 8.0)` 1대

**제가 이렇게 설계한 이유는 다음과 같습니다.**

1.  **장애 전파 방지**: 개발 환경의 불안정한 코드나 급격한 트래픽 테스트가 운영 환경에 영향을 미치는 것을 원천적으로 차단합니다. 이를 통해 운영 서비스는 항상 안정적인 상태를 유지할 수 있습니다.
2.  **데이터 무결성 확보**: 운영 데이터와 개발 데이터를 물리적으로 분리된 RDS 인스턴스에서 관리함으로써, 개발 중 발생할 수 있는 데이터 오염이나 유실 위험을 완벽하게 제거했습니다.
3.  **보안 강화**: 애플리케이션 서버(EC2)와 데이터베이스 서버(RDS)를 서로 다른 네트워크 계층에 배치했습니다. AWS 보안 그룹(Security Group)을 통해 RDS는 오직 지정된 EC2 인스턴스에서의 접근만을 허용하도록 설정하여, 외부로부터의 직접적인 데이터베이스 접근 시도를 차단하고 보안을 크게 향상시켰습니다.

### 나. 자동화를 통한 개발 효율 극대화 (CI/CD Pipeline)

**요구사항: 소스 변경 시 자동 빌드·배포 파이프라인 구성**

단순 반복적인 배포 작업을 자동화하여 개발자가 비즈니스 로직에만 집중할 수 있는 환경을 구축했습니다.

-   **소스 관리**: `Git`
-   **자동화 도구**: `GitHub Actions`
-   **실행 환경**: `Self-hosted Runner` (각 EC2 인스턴스에 설치)
-   **배포 전략**:
    -   `develop` 브랜치 Push → **개발(Dev) 서버** 자동 배포
    -   `main` 브랜치 Push → **운영(Prod) 서버** 자동 배포

**이 파이프라인의 강점은 다음과 같습니다.**

1.  **신속하고 일관된 배포**: Git에 코드를 Push하는 것만으로 빌드, 테스트, 배포 전 과정이 자동으로 실행됩니다. 이는 배포 과정에서 발생할 수 있는 휴먼 에러를 최소화하고, 언제나 동일한 프로세스를 통해 배포 일관성을 유지합니다.
2.  **민감 정보의 안전한 관리**: 데이터베이스 접속 정보나 외부 API 키 같은 민감 정보는 소스 코드에 하드코딩하지 않았습니다. 대신 `GitHub Secrets`에 안전하게 저장하고, CI/CD 파이프라인이 실행될 때만 환경 변수로 주입하여 `application.yml` 설정 파일을 동적으로 생성하도록 구성했습니다. 이를 통해 민감 정보의 유출을 방지하고 보안을 강화했습니다.

### 다. 안정적인 서비스 제공 환경 (Nginx & Spring Application)

EC2 인스턴스 내부에서는 **Nginx**를 리버스 프록시(Reverse Proxy)로, **Spring Boot 애플리케이션(JAR)**을 WAS(Web Application Server)로 구성하여 역할과 책임을 분리했습니다.

**Nginx를 도입한 이유는 다음과 같습니다.**

1.  **HTTPS 적용 및 관리 용이성**: 클라이언트와의 모든 통신은 Nginx를 통해 HTTPS(SSL/TLS)로 암호화됩니다. SSL 인증서 관리와 적용을 Nginx단에서 처리함으로써, Spring Boot 애플리케이션은 비즈니스 로직 처리에만 집중할 수 있도록 부담을 줄였습니다.
2.  **정적 콘텐츠 처리**: 이미지나 CSS, JS 파일과 같은 정적 콘텐츠 요청은 Nginx가 직접 처리하도록 하여, 애플리케이션 서버의 부하를 줄이고 전반적인 응답 속도를 향상시켰습니다.

### 라. 보안 통신과 신뢰성 확보 (Custom Domain & HTTPS)

**요구사항: 개인 도메인 연결 및 HTTPS 적용**

사용자에게 신뢰를 주고 안전한 서비스를 제공하기 위해 개인 도메인을 구매하여 애플리케이션에 연결하고, 모든 통신 구간을 암호화했습니다.

-   **인증서 발급**: `Let's Encrypt`를 통해 무료 SSL/TLS 인증서를 발급받았습니다.
-   **자동 갱신**: Certbot을 이용하여 발급받은 인증서가 만료되기 전에 자동으로 갱신되도록 설정하여, 인증서 관리 부담을 최소화했습니다.

이를 통해 클라이언트와 서버 간에 주고받는 모든 데이터(예: 로그인 정보, 개인정보)를 암호화하여 중간에서 데이터를 가로채는 스니핑(Sniffing) 공격을 방지하고, 사용자에게는 브라우저 주소창의 '자물쇠' 아이콘을 통해 서비스에 대한 신뢰감을 줄 수 있도록 구성했습니다.

---

## 3. 결론

제가 설계한 이 아키텍처는 **환경 분리를 통한 안정성**, **CI/CD를 통한 개발 효율성**, 그리고 **계층 분리와 HTTPS 적용을 통한 보안성**을 모두 확보한 구조입니다.
